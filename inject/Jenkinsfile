// Jenkinsfile for Inject
pipeline {
  agent {
    kubernetes {
      cloud "openshift"
      label 'jenkins-pod'
      containerTemplate {
        name 'sbt'
        image "hseeberger/scala-sbt"
        command 'cat'
        ttyEnabled: true
      }
    }
  }
  options { retry(3) }
  stages {
    stage('INJECT Build') {
      steps {
        container('sbt') {
          dir('inject') {
            sh "sbt clean assembly dockerFileTask"
            sh "rm -R ./docker"
            sh "mv target/docker ."
            sh "ls -als"
          }
        }
      }
    }
  }
}